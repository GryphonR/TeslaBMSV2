<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eChook Comms Board - Tesla BMS: BMS_Contactor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">eChook Comms Board - Tesla BMS<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Code adapted from the SimpBMS project to run a Tesla Module battery controller on the eChook Master Comms board with a Teensy 4.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classBMS__Contactor.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBMS__Contactor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">BMS_Contactor Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aafab7145d3c98853a43f9132c4458ff5" id="r_aafab7145d3c98853a43f9132c4458ff5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#aafab7145d3c98853a43f9132c4458ff5">BMS_Contactor</a> (ContactorName name, ContactorOutput connection, Economiser economiser)</td></tr>
<tr class="separator:aafab7145d3c98853a43f9132c4458ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ebdd7288cb942fdeae531f1eb3d76f9" id="r_a3ebdd7288cb942fdeae531f1eb3d76f9"><td class="memItemLeft" align="right" valign="top"><a id="a3ebdd7288cb942fdeae531f1eb3d76f9" name="a3ebdd7288cb942fdeae531f1eb3d76f9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update</b> ()</td></tr>
<tr class="separator:a3ebdd7288cb942fdeae531f1eb3d76f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761a32b38da7f5f6f98f3b381f859dd3" id="r_a761a32b38da7f5f6f98f3b381f859dd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a761a32b38da7f5f6f98f3b381f859dd3">close</a> ()</td></tr>
<tr class="memdesc:a761a32b38da7f5f6f98f3b381f859dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the contactor and set the state to CLOSED.  <br /></td></tr>
<tr class="separator:a761a32b38da7f5f6f98f3b381f859dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7311d87c3a3b3c75e64fbd312769c94" id="r_aa7311d87c3a3b3c75e64fbd312769c94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#aa7311d87c3a3b3c75e64fbd312769c94">close</a> (unsigned int delay)</td></tr>
<tr class="memdesc:aa7311d87c3a3b3c75e64fbd312769c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the contactor to close after a specified delay.  <br /></td></tr>
<tr class="separator:aa7311d87c3a3b3c75e64fbd312769c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad279e451ff207ba4c9ae1547c4177c45" id="r_ad279e451ff207ba4c9ae1547c4177c45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#ad279e451ff207ba4c9ae1547c4177c45">open</a> ()</td></tr>
<tr class="memdesc:ad279e451ff207ba4c9ae1547c4177c45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the contactor and sets the state to OPEN.  <br /></td></tr>
<tr class="separator:ad279e451ff207ba4c9ae1547c4177c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2f3d1dced7a509a670c9270c95773b" id="r_afe2f3d1dced7a509a670c9270c95773b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#afe2f3d1dced7a509a670c9270c95773b">open</a> (unsigned int delay)</td></tr>
<tr class="memdesc:afe2f3d1dced7a509a670c9270c95773b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the contactor after a specified delay.  <br /></td></tr>
<tr class="separator:afe2f3d1dced7a509a670c9270c95773b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200768b367f7580d7ae032df952dff2e" id="r_a200768b367f7580d7ae032df952dff2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a200768b367f7580d7ae032df952dff2e">open</a> (unsigned int delay, float currentThreshold)</td></tr>
<tr class="memdesc:a200768b367f7580d7ae032df952dff2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the contactor when the current is below the specified threshold or after the specified timeout.  <br /></td></tr>
<tr class="separator:a200768b367f7580d7ae032df952dff2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b2e373900dee5af13f91cb5f243dc2" id="r_a11b2e373900dee5af13f91cb5f243dc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a11b2e373900dee5af13f91cb5f243dc2">set</a> (ContactorState state)</td></tr>
<tr class="memdesc:a11b2e373900dee5af13f91cb5f243dc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the contactor state to the specified value.  <br /></td></tr>
<tr class="separator:a11b2e373900dee5af13f91cb5f243dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aad63383481efaef587b4e83288aab3" id="r_a0aad63383481efaef587b4e83288aab3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a0aad63383481efaef587b4e83288aab3">getState</a> ()</td></tr>
<tr class="memdesc:a0aad63383481efaef587b4e83288aab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current state of the contactor.  <br /></td></tr>
<tr class="separator:a0aad63383481efaef587b4e83288aab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7e11a530244e8437b761d462cef8d9" id="r_a9d7e11a530244e8437b761d462cef8d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a9d7e11a530244e8437b761d462cef8d9">diagnosticAvailable</a> ()</td></tr>
<tr class="memdesc:a9d7e11a530244e8437b761d462cef8d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether diagnostic functions are available for this contactor.  <br /></td></tr>
<tr class="separator:a9d7e11a530244e8437b761d462cef8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b00b384b655a5d8d2c5b9a215eea369" id="r_a6b00b384b655a5d8d2c5b9a215eea369"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a6b00b384b655a5d8d2c5b9a215eea369">getVoltage</a> (bool forceUpdate)</td></tr>
<tr class="memdesc:a6b00b384b655a5d8d2c5b9a215eea369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the voltage at the driver.  <br /></td></tr>
<tr class="separator:a6b00b384b655a5d8d2c5b9a215eea369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5506ea3e1768b163650f6525686b8b" id="r_a9b5506ea3e1768b163650f6525686b8b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a9b5506ea3e1768b163650f6525686b8b">getPinCurrent</a> (bool forceUpdate)</td></tr>
<tr class="memdesc:a9b5506ea3e1768b163650f6525686b8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current through the contactor coil.  <br /></td></tr>
<tr class="separator:a9b5506ea3e1768b163650f6525686b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594f0f5e68ed2b62ff861f0ead4df0ae" id="r_a594f0f5e68ed2b62ff861f0ead4df0ae"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a594f0f5e68ed2b62ff861f0ead4df0ae">getPower</a> (bool forceUpdate)</td></tr>
<tr class="memdesc:a594f0f5e68ed2b62ff861f0ead4df0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the power consumption of the contactor coil.  <br /></td></tr>
<tr class="separator:a594f0f5e68ed2b62ff861f0ead4df0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603e506756e5858b4d545205bf5c1bed" id="r_a603e506756e5858b4d545205bf5c1bed"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a603e506756e5858b4d545205bf5c1bed">getTemperature</a> (bool forceUpdate)</td></tr>
<tr class="memdesc:a603e506756e5858b4d545205bf5c1bed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the temperature of the driver casing.  <br /></td></tr>
<tr class="separator:a603e506756e5858b4d545205bf5c1bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904d0e7f018f56ae3a319581d7b649c6" id="r_a904d0e7f018f56ae3a319581d7b649c6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBMS__Contactor.html#a904d0e7f018f56ae3a319581d7b649c6">getResistance</a> (bool forceUpdate)</td></tr>
<tr class="memdesc:a904d0e7f018f56ae3a319581d7b649c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the resistance of the load connected to the contactor.  <br /></td></tr>
<tr class="separator:a904d0e7f018f56ae3a319581d7b649c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aafab7145d3c98853a43f9132c4458ff5" name="aafab7145d3c98853a43f9132c4458ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafab7145d3c98853a43f9132c4458ff5">&#9670;&#160;</a></span>BMS_Contactor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BMS_Contactor::BMS_Contactor </td>
          <td>(</td>
          <td class="paramtype">ContactorName&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContactorOutput&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Economiser&#160;</td>
          <td class="paramname"><em>economiser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>STILL TODO!</p>
<ul>
<li>Set fault reset signal to select fault behaviour between latch off or auto restart</li>
<li>Diagnostics for open/short circuit</li>
<li>Diagnostics for over temperature</li>
<li>Diagnostics for checking if contactor is connected or not by current reading. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a761a32b38da7f5f6f98f3b381f859dd3" name="a761a32b38da7f5f6f98f3b381f859dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761a32b38da7f5f6f98f3b381f859dd3">&#9670;&#160;</a></span>close() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the contactor and set the state to CLOSED. </p>
<p>Checks for potential latch up after setting the control pin high. If the pin is not high, as expected, it logs an error and attempts to return the contactor to a safe (OPEN) state. </p>

</div>
</div>
<a id="aa7311d87c3a3b3c75e64fbd312769c94" name="aa7311d87c3a3b3c75e64fbd312769c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7311d87c3a3b3c75e64fbd312769c94">&#9670;&#160;</a></span>close() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::close </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the contactor to close after a specified delay. </p>
<p>Sets the contactor state to WAITING_TO_CLOSE and sets the waiting close time to the current millis() plus the specified delay. If the contactor is already closed, this function does nothing.</p>
<dl class="section note"><dt>Note</dt><dd>Relies on the BMS_Contactor::update() function to be called regularly</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>The delay in milliseconds to wait before closing the contactor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d7e11a530244e8437b761d462cef8d9" name="a9d7e11a530244e8437b761d462cef8d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7e11a530244e8437b761d462cef8d9">&#9670;&#160;</a></span>diagnosticAvailable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BMS_Contactor::diagnosticAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates whether diagnostic functions are available for this contactor. </p>
<dl class="section return"><dt>Returns</dt><dd>true if diagnostics are available, false otherwise </dd></dl>

</div>
</div>
<a id="a9b5506ea3e1768b163650f6525686b8b" name="a9b5506ea3e1768b163650f6525686b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5506ea3e1768b163650f6525686b8b">&#9670;&#160;</a></span>getPinCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BMS_Contactor::getPinCurrent </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current through the contactor coil. </p>
<p>If the driver has diagnostic capabilities, this function returns the current through the contactor coil.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forceUpdate</td><td>If true, a fresh current value will be read from the driver before being returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current through the contactor coil in Amps. If the driver does not have diagnostic capabilities, the function returns -1. </dd></dl>

</div>
</div>
<a id="a594f0f5e68ed2b62ff861f0ead4df0ae" name="a594f0f5e68ed2b62ff861f0ead4df0ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a594f0f5e68ed2b62ff861f0ead4df0ae">&#9670;&#160;</a></span>getPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BMS_Contactor::getPower </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the power consumption of the contactor coil. </p>
<p>If the driver has diagnostic capabilities, this function returns the power consumption of the contactor coil. If forceUpdate is true, it will first read the latest voltage and current values from the driver. If the driver does not have diagnostic capabilities, the function returns -1.</p>
<dl class="section return"><dt>Returns</dt><dd>The power consumption of the contactor coil in Watts. If the driver does not have diagnostic capabilities, the function returns -1. </dd></dl>

</div>
</div>
<a id="a904d0e7f018f56ae3a319581d7b649c6" name="a904d0e7f018f56ae3a319581d7b649c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a904d0e7f018f56ae3a319581d7b649c6">&#9670;&#160;</a></span>getResistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BMS_Contactor::getResistance </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the resistance of the load connected to the contactor. </p>
<p>Calculates the resistance of the load connected to the contactor by dividing the voltage by the current. If forceUpdate is true, it will first read the latest voltage and current values from the contactor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forceUpdate</td><td>If true, fresh voltage and current values will be read from the driver before calculating the resistance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resistance of the load connected to the driver in Ohms. </dd></dl>

</div>
</div>
<a id="a0aad63383481efaef587b4e83288aab3" name="a0aad63383481efaef587b4e83288aab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aad63383481efaef587b4e83288aab3">&#9670;&#160;</a></span>getState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BMS_Contactor::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current state of the contactor. </p>
<dl class="section return"><dt>Returns</dt><dd>The current state of the contactor. Will be one of the ContactorState enum values. </dd></dl>

</div>
</div>
<a id="a603e506756e5858b4d545205bf5c1bed" name="a603e506756e5858b4d545205bf5c1bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603e506756e5858b4d545205bf5c1bed">&#9670;&#160;</a></span>getTemperature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BMS_Contactor::getTemperature </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the temperature of the driver casing. </p>
<p>If the driver casing driver has diagnostic capabilities, this function returns the temperature of the driver casing. If forceUpdate is true, it will first read the latest temperature value from the driver. If the driver does not have diagnostic capabilities, the function returns -1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forceUpdate</td><td>If true, a fresh temperature value will be read from the driver before being returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The temperature of the driver casing in degrees Celsius. If the driver does not have diagnostic capabilities, the function returns -1. </dd></dl>

</div>
</div>
<a id="a6b00b384b655a5d8d2c5b9a215eea369" name="a6b00b384b655a5d8d2c5b9a215eea369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b00b384b655a5d8d2c5b9a215eea369">&#9670;&#160;</a></span>getVoltage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float BMS_Contactor::getVoltage </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forceUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the voltage at the driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">forceUpdate</td><td>If true, the latest voltage values will be read from the driver before returning the value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The voltage at the driver in Volts. </dd></dl>

</div>
</div>
<a id="ad279e451ff207ba4c9ae1547c4177c45" name="ad279e451ff207ba4c9ae1547c4177c45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad279e451ff207ba4c9ae1547c4177c45">&#9670;&#160;</a></span>open() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::open </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the contactor and sets the state to OPEN. </p>
<p>Checks for potential latch up after setting the control pin low. </p>

</div>
</div>
<a id="afe2f3d1dced7a509a670c9270c95773b" name="afe2f3d1dced7a509a670c9270c95773b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2f3d1dced7a509a670c9270c95773b">&#9670;&#160;</a></span>open() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::open </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the contactor after a specified delay. </p>
<p>If the contactor is not already open, sets the contactor to the WAITING_TO_OPEN state and sets the waiting open time to the current time plus the specified delay. A debug message is logged to indicate that the contactor is opening with the specified delay.</p>
<dl class="section note"><dt>Note</dt><dd>Relies on the BMS_Contactor::update() function to be called regularly</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>The delay in milliseconds to wait before opening the contactor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a200768b367f7580d7ae032df952dff2e" name="a200768b367f7580d7ae032df952dff2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a200768b367f7580d7ae032df952dff2e">&#9670;&#160;</a></span>open() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::open </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>currentThreshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the contactor when the current is below the specified threshold or after the specified timeout. </p>
<p>If the contactor is not already open, sets the contactor to the WAITING_TO_OPEN_CURRENT state and sets the waiting open time to the current time plus the specified timeout. A debug message is logged to indicate that the contactor is opening with the specified delay.</p>
<dl class="section note"><dt>Note</dt><dd>Relies on the BMS_Contactor::update() function to be called regularly, and current to be updated regularly (Both sub 100ms periodically)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The delay in milliseconds to wait before opening the contactor </td></tr>
    <tr><td class="paramname">currentThreshold</td><td>The current threshold below which the contactor will open </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11b2e373900dee5af13f91cb5f243dc2" name="a11b2e373900dee5af13f91cb5f243dc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b2e373900dee5af13f91cb5f243dc2">&#9670;&#160;</a></span>set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BMS_Contactor::set </td>
          <td>(</td>
          <td class="paramtype">ContactorState&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the contactor state to the specified value. </p>
<p>This is a simple wrapper around the <a class="el" href="classBMS__Contactor.html#ad279e451ff207ba4c9ae1547c4177c45" title="Opens the contactor and sets the state to OPEN.">open()</a> and <a class="el" href="classBMS__Contactor.html#a761a32b38da7f5f6f98f3b381f859dd3" title="Close the contactor and set the state to CLOSED.">close()</a> functions, to make it easier to set the contactor state in a single call. If the state is set to OPEN, it calls <a class="el" href="classBMS__Contactor.html#ad279e451ff207ba4c9ae1547c4177c45" title="Opens the contactor and sets the state to OPEN.">open()</a> to open the contactor. If the state is set to any other value, it calls <a class="el" href="classBMS__Contactor.html#a761a32b38da7f5f6f98f3b381f859dd3" title="Close the contactor and set the state to CLOSED.">close()</a> to close the contactor. If the contactor is already in the requested state, this function does nothing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The desired state for the contactor. Must be either ContactorState::OPEN or ContactorState::CLOSED </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="BMS__Contactor_8h_source.html">BMS_Contactor.h</a></li>
<li>src/<b>BMS_Contactor.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classBMS__Contactor.html">BMS_Contactor</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
