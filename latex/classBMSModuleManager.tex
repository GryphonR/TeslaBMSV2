\doxysection{BMSModule\+Manager Class Reference}
\hypertarget{classBMSModuleManager}{}\label{classBMSModuleManager}\index{BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classBMSModuleManager_ae4f84252fb856fcc29c2e3ef9b38ae79}\label{classBMSModuleManager_ae4f84252fb856fcc29c2e3ef9b38ae79} 
{\bfseries BMSModule\+Manager} ()
\begin{DoxyCompactList}\small\item\em Constructs a \doxylink{classBMSModuleManager}{BMSModule\+Manager} object, initializing all modules to false, lowest\+Pack\+Volt to 1000V, highest\+Pack\+Volt to 0V, lowest\+Pack\+Temp to 200C, highest\+Pack\+Temp to -\/100C, and sets is\+Faulted to false. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classBMSModuleManager_a87213140ff1a6e147670054d563e01bb}{seriescells}} ()
\begin{DoxyCompactList}\small\item\em Calculates the total number of cells in series in the pack. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a8c687d2165e47c85efdbbf3a647c6f01}{clearmodules}} ()
\begin{DoxyCompactList}\small\item\em Clears all module voltage, temperature, and cell voltage data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a26cca2180eda2fdbf06d91e270027327}{Stop\+Balancing}} ()
\begin{DoxyCompactList}\small\item\em Stops balancing activity on all connected BMS modules. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_ab70fe99cb7d77bc4f508f138c5b6d916}{balance\+Cells}} (int duration, int debug)
\begin{DoxyCompactList}\small\item\em Activates cell balancing for each module based on the following conditions\+: \end{DoxyCompactList}\item 
\Hypertarget{classBMSModuleManager_a9aae56f1fe7017e960a1627fe25aac54}\label{classBMSModuleManager_a9aae56f1fe7017e960a1627fe25aac54} 
void {\bfseries setup\+Boards} ()
\item 
void \mbox{\hyperlink{classBMSModuleManager_a1238e874e527444ae777a3311bff415b}{find\+Boards}} ()
\item 
\Hypertarget{classBMSModuleManager_a1070d50fa128d714c41306722541a62b}\label{classBMSModuleManager_a1070d50fa128d714c41306722541a62b} 
void {\bfseries renumber\+Board\+IDs} ()
\begin{DoxyCompactList}\small\item\em Force all modules to reset back to address 0 then set them all up in order so that the first module in line from the master board is 1, the second one 2, and so on. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a20a13af385b94d5eefc37541e7f8b897}{clear\+Faults}} ()
\begin{DoxyCompactList}\small\item\em Clears all faults from the BMS modules. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a845579a1dae6762aec33df84536d5989}{sleep\+Boards}} ()
\begin{DoxyCompactList}\small\item\em Puts all boards on the bus into a Sleep state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_ac1575352813ec02fb2363b71e86f0bd5}{wake\+Boards}} ()
\item 
void \mbox{\hyperlink{classBMSModuleManager_aa546531c3975c3de547b7322bff36c76}{get\+All\+Volt\+Temp}} ()
\begin{DoxyCompactList}\small\item\em Retrieves voltage and temperature values from all connected BMS modules. \end{DoxyCompactList}\item 
\Hypertarget{classBMSModuleManager_a00d3cf58882e8abf20967fdc0ac76006}\label{classBMSModuleManager_a00d3cf58882e8abf20967fdc0ac76006} 
void {\bfseries read\+Setpoints} ()
\item 
void \mbox{\hyperlink{classBMSModuleManager_a1289e9c0e358e9967be57c17ba63b263}{set\+Battery\+ID}} (int id)
\begin{DoxyCompactList}\small\item\em Sets the battery ID of the pack. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a4c0cc66d5245f27d7c8f6adebd8662cb}{set\+Pstrings}} (int Pstrings)
\begin{DoxyCompactList}\small\item\em Sets the number of strings in parallel in the battery pack This value is used to calculate the pack voltage from the module voltages. \end{DoxyCompactList}\item 
\Hypertarget{classBMSModuleManager_a940362c16c14398ad1b2f5cf5ab3c90d}\label{classBMSModuleManager_a940362c16c14398ad1b2f5cf5ab3c90d} 
void {\bfseries set\+Under\+Volt} (float new\+Val)
\item 
\Hypertarget{classBMSModuleManager_a71281fba414b7c9c8da1c4a097169ec9}\label{classBMSModuleManager_a71281fba414b7c9c8da1c4a097169ec9} 
void {\bfseries set\+Over\+Volt} (float new\+Val)
\item 
\Hypertarget{classBMSModuleManager_aac04262c0cbeb48e3a0ab40714407841}\label{classBMSModuleManager_aac04262c0cbeb48e3a0ab40714407841} 
void {\bfseries set\+Over\+Temp} (float new\+Val)
\item 
\Hypertarget{classBMSModuleManager_a864c3b70ab2642206cb9dd1c3891df09}\label{classBMSModuleManager_a864c3b70ab2642206cb9dd1c3891df09} 
void {\bfseries set\+BalanceV} (float new\+Val)
\item 
\Hypertarget{classBMSModuleManager_aa16a9cfb8ef97fc6cf9373c2240cdc70}\label{classBMSModuleManager_aa16a9cfb8ef97fc6cf9373c2240cdc70} 
void {\bfseries set\+Balance\+Hyst} (float new\+Val)
\item 
\Hypertarget{classBMSModuleManager_a7b765ce5eb94773a63016ec1b9955ba4}\label{classBMSModuleManager_a7b765ce5eb94773a63016ec1b9955ba4} 
void {\bfseries set\+Sensors} (int sensor, float Ignore)
\item 
float \mbox{\hyperlink{classBMSModuleManager_ae3bfcdc8c70138b7d71e985eb0b18dc6}{get\+Pack\+Voltage}} ()
\begin{DoxyCompactList}\small\item\em Gets the current pack voltage. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a04b2bca8d5fff8bcdac99abb355c9cf6}{get\+Avg\+Temperature}} ()
\begin{DoxyCompactList}\small\item\em Returns the average temperature of the battery pack. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_af02506c84422bbb0a93357971eb9e7dc}{get\+High\+Temperature}} ()
\begin{DoxyCompactList}\small\item\em Returns the highest temperature of the battery pack. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a2fbf95790c1e73676ae17bd50d75ca96}{get\+Low\+Temperature}} ()
\begin{DoxyCompactList}\small\item\em Returns the lowest temperature of the battery pack. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a2e0fca66ad9bc17e8ed94911cef1c862}{get\+Avg\+Cell\+Volt}} ()
\begin{DoxyCompactList}\small\item\em Calculates the average cell voltage of the battery pack. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a32ead4b99c986e7e0e1bb4cb71457319}{get\+Low\+Cell\+Volt}} ()
\begin{DoxyCompactList}\small\item\em Gets the lowest cell voltage of the pack that has been seen. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a66602650155eb44462badeb626090904}{get\+High\+Cell\+Volt}} ()
\begin{DoxyCompactList}\small\item\em Gets the highest cell voltage of the pack that has been seen. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_a3be69c1d27d947b06d5ae875e4fbc621}{get\+High\+Voltage}} ()
\begin{DoxyCompactList}\small\item\em Gets the highest voltage of the pack that has been seen. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classBMSModuleManager_af62af953a74e929e556ebdd40b3c5d86}{get\+Low\+Voltage}} ()
\begin{DoxyCompactList}\small\item\em Gets the lowest voltage of the pack that has been seen. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classBMSModuleManager_aa821f4ddb010e8f12c1af7d08c4c61e6}{get\+Balancing}} ()
\begin{DoxyCompactList}\small\item\em Gets the current balancing status of the pack. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{classBMSModuleManager_a5a468f3d54db986909a6e54e5ef9c6d4}{getcellvolt}} (int modid, int cellid)
\begin{DoxyCompactList}\small\item\em Get the cell voltage of a module. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{classBMSModuleManager_a53286b6eb68c2e4f7e81f0d10b79bf8d}{gettemp}} (int modid, int tempid)
\begin{DoxyCompactList}\small\item\em Get the temperature of a module. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a7cdfccedf187137cf5fc02a7c883e02b}{print\+All\+CSV}} (unsigned long timestamp, float current, int SOC, int delim)
\begin{DoxyCompactList}\small\item\em Prints detailed information about the pack to the serial console in CSV format. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_abe17826b95e88b428f751a508c28a46b}{print\+Pack\+Summary}} ()
\begin{DoxyCompactList}\small\item\em Prints a summary of the battery pack\textquotesingle{}s state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classBMSModuleManager_a58ee4f8542ea572a6bc101688df26ba7}{print\+Pack\+Details}} (int digits)
\begin{DoxyCompactList}\small\item\em Prints detailed information about the pack to the serial console. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classBMSModuleManager_a1225b56b88689a06fd644286876683a2}{get\+Num\+Modules}} ()
\begin{DoxyCompactList}\small\item\em Gets the number of BMS modules that have been found. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\Hypertarget{classBMSModuleManager_ab70fe99cb7d77bc4f508f138c5b6d916}\label{classBMSModuleManager_ab70fe99cb7d77bc4f508f138c5b6d916} 
\index{BMSModuleManager@{BMSModuleManager}!balanceCells@{balanceCells}}
\index{balanceCells@{balanceCells}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{balanceCells()}{balanceCells()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::balance\+Cells (\begin{DoxyParamCaption}\item[{int}]{duration,  }\item[{int}]{debug }\end{DoxyParamCaption})}



Activates cell balancing for each module based on the following conditions\+: 


\begin{DoxyEnumerate}
\item The module is present.
\item The module is not already balancing.
\item The module has at least one cell with a voltage higher than the lowest cell voltage.
\end{DoxyEnumerate}


\begin{DoxyParams}{Parameters}
{\em duration} & The duration in seconds to balance the cells. \\
\hline
{\em debug} & Set to 1 to print debug information. \\
\hline
\end{DoxyParams}
\Hypertarget{classBMSModuleManager_a20a13af385b94d5eefc37541e7f8b897}\label{classBMSModuleManager_a20a13af385b94d5eefc37541e7f8b897} 
\index{BMSModuleManager@{BMSModuleManager}!clearFaults@{clearFaults}}
\index{clearFaults@{clearFaults}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{clearFaults()}{clearFaults()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::clear\+Faults (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clears all faults from the BMS modules. 

This function clears any faults recorded by the BMS modules. Faults are typically cleared after a power cycle or reset. The function sends a broadcast message to the modules to clear the faults. The function also sets the {\ttfamily is\+Faulted} flag to false to indicate that the faults have been cleared. \Hypertarget{classBMSModuleManager_a8c687d2165e47c85efdbbf3a647c6f01}\label{classBMSModuleManager_a8c687d2165e47c85efdbbf3a647c6f01} 
\index{BMSModuleManager@{BMSModuleManager}!clearmodules@{clearmodules}}
\index{clearmodules@{clearmodules}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{clearmodules()}{clearmodules()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::clearmodules (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clears all module voltage, temperature, and cell voltage data. 

Loops over all modules and calls their clear\+Module() method to clear out all of the voltage and temperature data. This is used prior to reading all of the module data to ensure that we are starting from a clean slate. \Hypertarget{classBMSModuleManager_a1238e874e527444ae777a3311bff415b}\label{classBMSModuleManager_a1238e874e527444ae777a3311bff415b} 
\index{BMSModuleManager@{BMSModuleManager}!findBoards@{findBoards}}
\index{findBoards@{findBoards}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{findBoards()}{findBoards()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::find\+Boards (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Iterate through all 62 possible board addresses (1-\/62) to see if they respond Do a read of the address and the version number to see if they respond If they do, then add them to the list of found modules \Hypertarget{classBMSModuleManager_aa546531c3975c3de547b7322bff36c76}\label{classBMSModuleManager_aa546531c3975c3de547b7322bff36c76} 
\index{BMSModuleManager@{BMSModuleManager}!getAllVoltTemp@{getAllVoltTemp}}
\index{getAllVoltTemp@{getAllVoltTemp}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getAllVoltTemp()}{getAllVoltTemp()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::get\+All\+Volt\+Temp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Retrieves voltage and temperature values from all connected BMS modules. 

This method first stops any balancing activity, then reads voltage and temperature values from all existing BMS modules. It also keeps track of the lowest and highest temperatures observed across all modules. Finally, it checks if any modules are in a faulted state and logs an error if so. The highest and lowest cell voltage values are also retrieved.

\begin{DoxyNote}{Note}
This method is the primary entry point for reading BMS module data. It should be called periodically to ensure that the system has up-\/to-\/date information about the state of the battery pack. 
\end{DoxyNote}
\Hypertarget{classBMSModuleManager_a2e0fca66ad9bc17e8ed94911cef1c862}\label{classBMSModuleManager_a2e0fca66ad9bc17e8ed94911cef1c862} 
\index{BMSModuleManager@{BMSModuleManager}!getAvgCellVolt@{getAvgCellVolt}}
\index{getAvgCellVolt@{getAvgCellVolt}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getAvgCellVolt()}{getAvgCellVolt()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Avg\+Cell\+Volt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Calculates the average cell voltage of the battery pack. 

This function calculates the average cell voltage of the battery pack by summing up the average cell voltages of all modules and dividing by the number of modules.

\begin{DoxyReturn}{Returns}
The average cell voltage of the battery pack 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a04b2bca8d5fff8bcdac99abb355c9cf6}\label{classBMSModuleManager_a04b2bca8d5fff8bcdac99abb355c9cf6} 
\index{BMSModuleManager@{BMSModuleManager}!getAvgTemperature@{getAvgTemperature}}
\index{getAvgTemperature@{getAvgTemperature}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getAvgTemperature()}{getAvgTemperature()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Avg\+Temperature (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the average temperature of the battery pack. 

This function calculates the average temperature of the battery pack by summing up the average temperatures of all modules and dividing by the number of modules. It also keeps track of the lowest and highest temperatures found in the pack.

\begin{DoxyReturn}{Returns}
The average temperature of the battery pack 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_aa821f4ddb010e8f12c1af7d08c4c61e6}\label{classBMSModuleManager_aa821f4ddb010e8f12c1af7d08c4c61e6} 
\index{BMSModuleManager@{BMSModuleManager}!getBalancing@{getBalancing}}
\index{getBalancing@{getBalancing}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getBalancing()}{getBalancing()}}
{\footnotesize\ttfamily int BMSModule\+Manager\+::get\+Balancing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the current balancing status of the pack. 

\begin{DoxyReturn}{Returns}
Bitfield of which cells are currently balancing. Bit 0 is cell 1, bit 1 is cell 2, etc. 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a5a468f3d54db986909a6e54e5ef9c6d4}\label{classBMSModuleManager_a5a468f3d54db986909a6e54e5ef9c6d4} 
\index{BMSModuleManager@{BMSModuleManager}!getcellvolt@{getcellvolt}}
\index{getcellvolt@{getcellvolt}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getcellvolt()}{getcellvolt()}}
{\footnotesize\ttfamily uint16\+\_\+t BMSModule\+Manager\+::getcellvolt (\begin{DoxyParamCaption}\item[{int}]{modid,  }\item[{int}]{cellid }\end{DoxyParamCaption})}



Get the cell voltage of a module. 


\begin{DoxyParams}{Parameters}
{\em modid} & Module ID. Valid values are 1-\/62 \\
\hline
{\em cellid} & Cell ID. Valid values are 0-\/5 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The cell voltage in millivolts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a66602650155eb44462badeb626090904}\label{classBMSModuleManager_a66602650155eb44462badeb626090904} 
\index{BMSModuleManager@{BMSModuleManager}!getHighCellVolt@{getHighCellVolt}}
\index{getHighCellVolt@{getHighCellVolt}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getHighCellVolt()}{getHighCellVolt()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+High\+Cell\+Volt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the highest cell voltage of the pack that has been seen. 

\begin{DoxyReturn}{Returns}
The highest cell voltage of the pack in Volts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_af02506c84422bbb0a93357971eb9e7dc}\label{classBMSModuleManager_af02506c84422bbb0a93357971eb9e7dc} 
\index{BMSModuleManager@{BMSModuleManager}!getHighTemperature@{getHighTemperature}}
\index{getHighTemperature@{getHighTemperature}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getHighTemperature()}{getHighTemperature()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+High\+Temperature (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the highest temperature of the battery pack. 

\begin{DoxyReturn}{Returns}
The highest temperature of the battery pack 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a3be69c1d27d947b06d5ae875e4fbc621}\label{classBMSModuleManager_a3be69c1d27d947b06d5ae875e4fbc621} 
\index{BMSModuleManager@{BMSModuleManager}!getHighVoltage@{getHighVoltage}}
\index{getHighVoltage@{getHighVoltage}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getHighVoltage()}{getHighVoltage()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+High\+Voltage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the highest voltage of the pack that has been seen. 

\begin{DoxyReturn}{Returns}
The highest voltage of the pack in Volts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a32ead4b99c986e7e0e1bb4cb71457319}\label{classBMSModuleManager_a32ead4b99c986e7e0e1bb4cb71457319} 
\index{BMSModuleManager@{BMSModuleManager}!getLowCellVolt@{getLowCellVolt}}
\index{getLowCellVolt@{getLowCellVolt}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getLowCellVolt()}{getLowCellVolt()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Low\+Cell\+Volt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the lowest cell voltage of the pack that has been seen. 

\begin{DoxyReturn}{Returns}
The lowest cell voltage of the pack in Volts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a2fbf95790c1e73676ae17bd50d75ca96}\label{classBMSModuleManager_a2fbf95790c1e73676ae17bd50d75ca96} 
\index{BMSModuleManager@{BMSModuleManager}!getLowTemperature@{getLowTemperature}}
\index{getLowTemperature@{getLowTemperature}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getLowTemperature()}{getLowTemperature()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Low\+Temperature (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the lowest temperature of the battery pack. 

\begin{DoxyReturn}{Returns}
The lowest temperature of the battery pack 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_af62af953a74e929e556ebdd40b3c5d86}\label{classBMSModuleManager_af62af953a74e929e556ebdd40b3c5d86} 
\index{BMSModuleManager@{BMSModuleManager}!getLowVoltage@{getLowVoltage}}
\index{getLowVoltage@{getLowVoltage}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getLowVoltage()}{getLowVoltage()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Low\+Voltage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the lowest voltage of the pack that has been seen. 

\begin{DoxyReturn}{Returns}
The lowest voltage of the pack in Volts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a1225b56b88689a06fd644286876683a2}\label{classBMSModuleManager_a1225b56b88689a06fd644286876683a2} 
\index{BMSModuleManager@{BMSModuleManager}!getNumModules@{getNumModules}}
\index{getNumModules@{getNumModules}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getNumModules()}{getNumModules()}}
{\footnotesize\ttfamily int BMSModule\+Manager\+::get\+Num\+Modules (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the number of BMS modules that have been found. 

\begin{DoxyReturn}{Returns}
The number of BMS modules that have been found 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_ae3bfcdc8c70138b7d71e985eb0b18dc6}\label{classBMSModuleManager_ae3bfcdc8c70138b7d71e985eb0b18dc6} 
\index{BMSModuleManager@{BMSModuleManager}!getPackVoltage@{getPackVoltage}}
\index{getPackVoltage@{getPackVoltage}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{getPackVoltage()}{getPackVoltage()}}
{\footnotesize\ttfamily float BMSModule\+Manager\+::get\+Pack\+Voltage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the current pack voltage. 

\begin{DoxyReturn}{Returns}
The current pack voltage in Volts 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a53286b6eb68c2e4f7e81f0d10b79bf8d}\label{classBMSModuleManager_a53286b6eb68c2e4f7e81f0d10b79bf8d} 
\index{BMSModuleManager@{BMSModuleManager}!gettemp@{gettemp}}
\index{gettemp@{gettemp}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{gettemp()}{gettemp()}}
{\footnotesize\ttfamily uint16\+\_\+t BMSModule\+Manager\+::gettemp (\begin{DoxyParamCaption}\item[{int}]{modid,  }\item[{int}]{tempid }\end{DoxyParamCaption})}



Get the temperature of a module. 


\begin{DoxyParams}{Parameters}
{\em modid} & Module ID. Valid values are 1-\/62 \\
\hline
{\em tempid} & Temperature ID. Valid values are 0-\/2 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The temperature in degrees Celsius 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a7cdfccedf187137cf5fc02a7c883e02b}\label{classBMSModuleManager_a7cdfccedf187137cf5fc02a7c883e02b} 
\index{BMSModuleManager@{BMSModuleManager}!printAllCSV@{printAllCSV}}
\index{printAllCSV@{printAllCSV}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{printAllCSV()}{printAllCSV()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::print\+All\+CSV (\begin{DoxyParamCaption}\item[{unsigned long}]{timestamp,  }\item[{float}]{current,  }\item[{int}]{SOC,  }\item[{int}]{delim }\end{DoxyParamCaption})}



Prints detailed information about the pack to the serial console in CSV format. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em timestamp} & The timestamp at which the data was collected. \\
\hline
\mbox{\texttt{ in}}  & {\em current} & The current that was read from the current sensor. \\
\hline
\mbox{\texttt{ in}}  & {\em SOC} & The state of charge of the pack. \\
\hline
\mbox{\texttt{ in}}  & {\em delim} & The delimiter character to use between each value.\\
\hline
\end{DoxyParams}
This function prints detailed information about the pack to the serial console in CSV format. It includes the timestamp, current, SOC, module number, cell voltage, and temperatures for each module. \Hypertarget{classBMSModuleManager_a58ee4f8542ea572a6bc101688df26ba7}\label{classBMSModuleManager_a58ee4f8542ea572a6bc101688df26ba7} 
\index{BMSModuleManager@{BMSModuleManager}!printPackDetails@{printPackDetails}}
\index{printPackDetails@{printPackDetails}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{printPackDetails()}{printPackDetails()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::print\+Pack\+Details (\begin{DoxyParamCaption}\item[{int}]{digits }\end{DoxyParamCaption})}



Prints detailed information about the pack to the serial console. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em digits} & The number of decimal places to display the voltage values\\
\hline
\end{DoxyParams}
This function prints detailed information about the pack to the serial console. It includes the number of modules, cells and strings, the pack voltage, average cell voltage, low and high cell voltage, average temperature, and detailed information about each module, including its voltage, cell voltages, and temperatures. \Hypertarget{classBMSModuleManager_abe17826b95e88b428f751a508c28a46b}\label{classBMSModuleManager_abe17826b95e88b428f751a508c28a46b} 
\index{BMSModuleManager@{BMSModuleManager}!printPackSummary@{printPackSummary}}
\index{printPackSummary@{printPackSummary}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{printPackSummary()}{printPackSummary()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::print\+Pack\+Summary (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Prints a summary of the battery pack\textquotesingle{}s state. 

Prints the number of modules found, the pack voltage, average cell voltage, and average temperature. Then it loops over all modules and prints their voltage, temperature range, and any faults or alerts they have. If a module has a fault or alert, it prints a description of the fault or alert. \Hypertarget{classBMSModuleManager_a87213140ff1a6e147670054d563e01bb}\label{classBMSModuleManager_a87213140ff1a6e147670054d563e01bb} 
\index{BMSModuleManager@{BMSModuleManager}!seriescells@{seriescells}}
\index{seriescells@{seriescells}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{seriescells()}{seriescells()}}
{\footnotesize\ttfamily int BMSModule\+Manager\+::seriescells (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Calculates the total number of cells in series in the pack. 

Loops through all modules and sums up the number of cells in each module to get the total number of cells in the pack. This is used to calculate the pack voltage.

\begin{DoxyReturn}{Returns}
The total number of cells in series. 
\end{DoxyReturn}
\Hypertarget{classBMSModuleManager_a1289e9c0e358e9967be57c17ba63b263}\label{classBMSModuleManager_a1289e9c0e358e9967be57c17ba63b263} 
\index{BMSModuleManager@{BMSModuleManager}!setBatteryID@{setBatteryID}}
\index{setBatteryID@{setBatteryID}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{setBatteryID()}{setBatteryID()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::set\+Battery\+ID (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption})}



Sets the battery ID of the pack. 

This value is used to store specific configuration and settings for the pack 
\begin{DoxyParams}{Parameters}
{\em id} & The ID of the battery pack \\
\hline
\end{DoxyParams}
\Hypertarget{classBMSModuleManager_a4c0cc66d5245f27d7c8f6adebd8662cb}\label{classBMSModuleManager_a4c0cc66d5245f27d7c8f6adebd8662cb} 
\index{BMSModuleManager@{BMSModuleManager}!setPstrings@{setPstrings}}
\index{setPstrings@{setPstrings}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{setPstrings()}{setPstrings()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::set\+Pstrings (\begin{DoxyParamCaption}\item[{int}]{Pstrings }\end{DoxyParamCaption})}



Sets the number of strings in parallel in the battery pack This value is used to calculate the pack voltage from the module voltages. 


\begin{DoxyParams}{Parameters}
{\em Pstrings} & The number of strings in parallel \\
\hline
\end{DoxyParams}
\Hypertarget{classBMSModuleManager_a845579a1dae6762aec33df84536d5989}\label{classBMSModuleManager_a845579a1dae6762aec33df84536d5989} 
\index{BMSModuleManager@{BMSModuleManager}!sleepBoards@{sleepBoards}}
\index{sleepBoards@{sleepBoards}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{sleepBoards()}{sleepBoards()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::sleep\+Boards (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Puts all boards on the bus into a Sleep state. 

This is good to use when the vehicle is in a rest state. Pulling the boards out of sleep only to check voltage decay and temperature when the contactors are open. \Hypertarget{classBMSModuleManager_a26cca2180eda2fdbf06d91e270027327}\label{classBMSModuleManager_a26cca2180eda2fdbf06d91e270027327} 
\index{BMSModuleManager@{BMSModuleManager}!StopBalancing@{StopBalancing}}
\index{StopBalancing@{StopBalancing}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{StopBalancing()}{StopBalancing()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::\+Stop\+Balancing (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Stops balancing activity on all connected BMS modules. 

This method iterates over all existing BMS modules and calls their {\ttfamily stop\+Balance} method to disable balancing activity. This is useful when the vehicle is not in operation and balancing is not necessary. \Hypertarget{classBMSModuleManager_ac1575352813ec02fb2363b71e86f0bd5}\label{classBMSModuleManager_ac1575352813ec02fb2363b71e86f0bd5} 
\index{BMSModuleManager@{BMSModuleManager}!wakeBoards@{wakeBoards}}
\index{wakeBoards@{wakeBoards}!BMSModuleManager@{BMSModuleManager}}
\doxysubsubsection{\texorpdfstring{wakeBoards()}{wakeBoards()}}
{\footnotesize\ttfamily void BMSModule\+Manager\+::wake\+Boards (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Wakes all the boards up and clears thier SLEEP state bit in the Alert Status Registery

The boards are put in a sleep state when the vehicle is in a rest state, and are only woken up to check voltage decay and temperature when the contactors are open. This function is useful to wake all the boards up when the vehicle is going to be used.

Note\+: This function also clears the SLEEP state bit in the Alert Status Registery, which is automatically set when the boards are put in a sleep state. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/BMSModule\+Manager.\+h\item 
src/BMSModule\+Manager.\+cpp\end{DoxyCompactItemize}
